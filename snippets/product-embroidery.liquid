
<script src="{{ 'product-embroidery.js' | asset_url }}" defer="defer"></script>
<section id="embroidery-options" class="bg-lightGray">
    <div class="p-6">
        <div class="flex justify-between items-center gap-2">
            <div class="flex items-center">
                <div class="flex items-center">
                <input id="expandEmbroidery" type="checkbox" value="" class="!w-7 !h-7 text-blue-600 bg-gray-100 border-gray-300 rounded accent-black cursor-pointer">
                <label for="expandEmbroidery" class="ms-2 font-medium text-textPrimary dark:text-gray-300 cursor-pointer">{{ 'embroidery.section.title' | t }}</label>
                </div>
            </div>
            <div class="flex items-center">
                <p>+<span class="embroidery_color_price"></span></p>
            </div>
        </div>

        <div id="embroideryContent" style="display: none;">
        <div class="flex gap-16 mt-6 max-xl:flex-col max-xl:gap-10" >
            <div class="flex-grow">
                <div class="">
                        <p class="text-textPrimary">{{ 'embroidery.text.label' | t: max_chars: product.metafields.custom.embroidery_character }}</p>
                        <div class="mt-3">
                                <input 
                                    type="text" 
                                    name="properties[embroidery_text]" 
                                    placeholder="Embroidered Name" 
                                    class="py-3 px-6 w-full rounded-md border border-gray-400 focus:ring-1 focus:ring-black focus:outline-none"
                                    maxlength="{{ product.metafields.custom.embroidery_character }}"
                                >
                        </div>
                </div>
                
                <div class="mt-10">
                        <p class="text-textPrimary">{{ 'embroidery.color.label' | t }}</p>
                        <div class="flex gap-6 mt-3">
                            {% if product.metafields.custom.embroidery_color %}
                                {% for color in product.metafields.custom.embroidery_color.value %}
                                    <div class="flex">
                                        <label class="cursor-pointer">
                                            <div>
                                                <input type="radio" name="properties[embroidery_color]" value="{{ color.label }}" class="hidden peer" data-price="{{ color.price.value | money }}">
                                                <div class="h-16 w-16 rounded-full bg-[{{ color.color }}] border-2 peer-checked:ring-1 peer-checked:ring-black border-gray-200 ">
                                                </div>
                                                <div class="mt-2">
                                                    <p class="text-sm mt-3">{{ color.label }}</p>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <p>No embroidery colors available.</p>
                            {% endif %}
                        </div>
                        <div class="mt-10">
                            <p class="text-textPrimary">{{ 'embroidery.font.label' | t }}</p>
                            <div class="flex gap-4 w-full mt-3">
                                {% if product.metafields.custom.embroidery_font %}
                                    {% for font in product.metafields.custom.embroidery_font.value %}
                                        <div class="flex w-full">
                                            <label class="w-full cursor-pointer">
                                                <div>
                                                    <input type="radio" name="properties[embroidery_font]" value="{{ font.label }}" class="hidden peer">
                                                    
                                                    <div class="border-2 border-gray-400 py-3 w-full text-center rounded-md peer-checked:border-2 peer-checked:border-black peer-checked:font-bold">
                                                        <p class="text-sm font-['{{ font.font }}']">{{ font.label }}</p>
                                                    </div>
                                                </div>
                                            </label>
                                        </div>
                                    {% endfor %}
                                {% else %}
                                    <p>No embroidery font available.</p>
                                {% endif %}
                                
                            </div>
                        </div>
                </div>
            </div>
            <div class="">
                {% if product.metafields.custom.embroidery_image != blank %}
                    <img src="{{ product.metafields.custom.embroidery_image | img_url: width: 228 }}" alt="Embroidery Image">
                  {% else %}
                  <img src="https://placehold.co/228x228/png?text=No+preview+image+available">
                  {% endif %}
            </div>
        </div>
        <div>
            <p class="text-4 mt-6">{{ 'embroidery.notice' | t }}</p>
        </div>
        </div>
    </div>
</section>

